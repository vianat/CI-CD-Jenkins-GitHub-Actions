pipeline {
	agent any

	stages {
		stage('Unit tests - backend') {
			steps {
				dir('bugtracker-backend') {
					sh 'go test -v ./...'
				}
			}
		}

		stage('ui tests - frontend') {
			agent any  // Важно: НЕТ docker блока!
			steps {
				dir('bugtracker-frontend') {
					sh '''
                        # Проверяем Node.js
                        echo "=== Node.js Check ==="
                        node --version
                        npm --version

                        echo "=== Current Directory ==="
                        pwd
                        ls -la

                        echo "=== Running Tests ==="
                        npm ci --no-audit
                        npm test
                    '''
				}
			}
		}
	}
}